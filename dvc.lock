schema: '2.0'
stages:
  download:
    cmd: python3 -m src.data.download_raw_dataset
    deps:
    - path: src/config.py
      hash: md5
      md5: 9bdec777b3b80b10e0edf8c8275af359
      size: 1394
    - path: src/data/download_raw_dataset.py
      hash: md5
      md5: 810f4f307477b783266e99604b847e57
      size: 649
    outs:
    - path: data/raw/imdb.parquet
      hash: md5
      md5: 9e249b92e72271b5a89ccf61e07a236c
      size: 25169108
  preprocess:
    cmd: python3 -m src.data.preprocess
    deps:
    - path: data/raw/imdb.parquet
      hash: md5
      md5: 9e249b92e72271b5a89ccf61e07a236c
      size: 25169108
    - path: src/config.py
      hash: md5
      md5: 9bdec777b3b80b10e0edf8c8275af359
      size: 1394
    - path: src/data/preprocess.py
      hash: md5
      md5: 7295deeae634a838c3cae3f47dc8f0e9
      size: 1601
    outs:
    - path: data/interim/imdb_cleaned.parquet
      hash: md5
      md5: e88edd0f2d1c0af8855f514c24b3e25d
      size: 25791663
  split:
    cmd: python3 -m src.data.split_data
    deps:
    - path: data/interim/imdb_cleaned.parquet
      hash: md5
      md5: e88edd0f2d1c0af8855f514c24b3e25d
      size: 25791663
    - path: src/config.py
      hash: md5
      md5: 9bdec777b3b80b10e0edf8c8275af359
      size: 1394
    - path: src/data/split_data.py
      hash: md5
      md5: 4382ad1339e71501b336b2320ded9aec
      size: 1148
    outs:
    - path: data/processed/test.parquet
      hash: md5
      md5: 9e8217d64b98a84cdd64d659a991c3d5
      size: 2564844
    - path: data/processed/train.parquet
      hash: md5
      md5: ba4ada91d0732f7f905e1ebf68a52e8b
      size: 18017688
    - path: data/processed/validation.parquet
      hash: md5
      md5: 0db9642804a198fb1ecf5c8e513fd8aa
      size: 5229871
  train:
    cmd: python3 -m src.modeling.train
    deps:
    - path: data/processed/train.parquet
      hash: md5
      md5: ff93f05c3f3589ceeb152d4ba12c0f8a
      size: 18040139
    - path: data/processed/validation.parquet
      hash: md5
      md5: 6e37345203b03e6a23ce22b35e4aa145
      size: 5167316
    - path: src/config.py
      hash: md5
      md5: 0a0e052e16cc7605444de9822fa4308e
      size: 1326
    - path: src/modeling/train.py
      hash: md5
      md5: b843c2a536a9d1d44b192d11670522c0
      size: 3562
    outs:
    - path: models/distilbert-imdb
      hash: md5
      md5: 7682bbb13892e1501c24577bd2476673.dir
      size: 268783444
      nfiles: 7
    - path: models/distilbert-imdb-checkpoint
      hash: md5
      md5: 156ddc7d46ec041a13efa55d7565d3a9.dir
      size: 804528074
      nfiles: 11
  evaluate:
    cmd: python3 -m src.modeling.evaluate
    deps:
    - path: data/processed/test.parquet
      hash: md5
      md5: fe80344fbb6c1cb5257c8e91da71f07c
      size: 2613371
    - path: models/distilbert-imdb
      hash: md5
      md5: 267dbc22d66ac42d6ba5fa687e8c4e43.dir
      size: 268783346
      nfiles: 7
    - path: src/modeling/evaluate.py
      hash: md5
      md5: 7e6451f0642f20a55ba46abf29973138
      size: 1121
  configure_gx:
    cmd: python3 -m src.data.gx_context_configuration
    deps:
    - path: src/data/gx_context_configuration.py
      hash: md5
      md5: 3a61ff2758fdfc14e6c6003f5162a6be
      size: 3718
  validate-data:
    cmd: python3 -m src.data.validate_data
    deps:
    - path: data/interim/imdb_cleaned.parquet
      hash: md5
      md5: e88edd0f2d1c0af8855f514c24b3e25d
      size: 25791663
    - path: src/data/gx_context_configuration.py
      hash: md5
      md5: 3a61ff2758fdfc14e6c6003f5162a6be
      size: 3718
    - path: src/data/validate_data.py
      hash: md5
      md5: f211bd7615c06e3a36d2c139f0953a69
      size: 776
  train@0:
    cmd: python3 -m src.modeling.train distilbert/distilbert-base-uncased
      distilbert-imdb
    deps:
    - path: data/processed/train.parquet
      hash: md5
      md5: ba4ada91d0732f7f905e1ebf68a52e8b
      size: 18017688
    - path: data/processed/validation.parquet
      hash: md5
      md5: 0db9642804a198fb1ecf5c8e513fd8aa
      size: 5229871
    - path: src/config.py
      hash: md5
      md5: 9bdec777b3b80b10e0edf8c8275af359
      size: 1394
    - path: src/modeling/train.py
      hash: md5
      md5: 7dc2b287f9020e3cce8ed8f69ab2e784
      size: 3406
    outs:
    - path: models/distilbert-imdb
      hash: md5
      md5: 2cb9d0f4631afa850ddcd7f5c9f6385f.dir
      size: 268783463
      nfiles: 7
    - path: models/distilbert-imdb-checkpoint
      hash: md5
      md5: 21b936ab14bd76b2940d655e125ed3b4.dir
      size: 804528093
      nfiles: 11
  train@1:
    cmd: python3 -m src.modeling.train
      distilbert/distilbert-base-uncased-finetuned-sst-2-english
      distilbert-sst-imdb
    deps:
    - path: data/processed/train.parquet
      hash: md5
      md5: ba4ada91d0732f7f905e1ebf68a52e8b
      size: 18017688
    - path: data/processed/validation.parquet
      hash: md5
      md5: 0db9642804a198fb1ecf5c8e513fd8aa
      size: 5229871
    - path: src/config.py
      hash: md5
      md5: 9bdec777b3b80b10e0edf8c8275af359
      size: 1394
    - path: src/modeling/train.py
      hash: md5
      md5: 7dc2b287f9020e3cce8ed8f69ab2e784
      size: 3406
    outs:
    - path: models/distilbert-sst-imdb
      hash: md5
      md5: e34b147ed9d95e7cf93bf629b245bd7c.dir
      size: 268783567
      nfiles: 7
    - path: models/distilbert-sst-imdb-checkpoint
      hash: md5
      md5: 93ab9405dc0a21a964de6a224cc0aca7.dir
      size: 804528197
      nfiles: 11
