schema: '2.0'
stages:
  download:
    cmd: python3 -m src.data.download_raw_dataset
    deps:
    - path: src/config.py
      hash: md5
      md5: 0a0e052e16cc7605444de9822fa4308e
      size: 1326
    - path: src/data/download_raw_dataset.py
      hash: md5
      md5: 810f4f307477b783266e99604b847e57
      size: 649
    outs:
    - path: data/raw/imdb.parquet
      hash: md5
      md5: 8ba8a331da61fbf65a154c374da782d1
      size: 25169132
  preprocess:
    cmd: python3 -m src.data.preprocess
    deps:
    - path: data/raw/imdb.parquet
      hash: md5
      md5: 8ba8a331da61fbf65a154c374da782d1
      size: 25169132
    - path: src/config.py
      hash: md5
      md5: 0a0e052e16cc7605444de9822fa4308e
      size: 1326
    - path: src/data/preprocess.py
      hash: md5
      md5: 7295deeae634a838c3cae3f47dc8f0e9
      size: 1601
    outs:
    - path: data/interim/imdb_cleaned.parquet
      hash: md5
      md5: 6060f09971d8f01b03e44bee7e9bc633
      size: 25776702
  split:
    cmd: python3 -m src.data.split_data
    deps:
    - path: data/interim/imdb_cleaned.parquet
      hash: md5
      md5: 6060f09971d8f01b03e44bee7e9bc633
      size: 25776702
    - path: src/config.py
      hash: md5
      md5: 0a0e052e16cc7605444de9822fa4308e
      size: 1326
    - path: src/data/split_data.py
      hash: md5
      md5: 4382ad1339e71501b336b2320ded9aec
      size: 1148
    outs:
    - path: data/processed/test.parquet
      hash: md5
      md5: 2a7248ac51ba6374c2b83665be073a93
      size: 2624310
    - path: data/processed/train.parquet
      hash: md5
      md5: ff93f05c3f3589ceeb152d4ba12c0f8a
      size: 18040139
    - path: data/processed/validation.parquet
      hash: md5
      md5: 6e37345203b03e6a23ce22b35e4aa145
      size: 5167316
  train:
    cmd: python3 -m src.modeling.train
    deps:
    - path: data/processed/train.parquet
      hash: md5
      md5: ff93f05c3f3589ceeb152d4ba12c0f8a
      size: 18040139
    - path: data/processed/validation.parquet
      hash: md5
      md5: 6e37345203b03e6a23ce22b35e4aa145
      size: 5167316
    - path: src/config.py
      hash: md5
      md5: 0a0e052e16cc7605444de9822fa4308e
      size: 1326
    - path: src/modeling/train.py
      hash: md5
      md5: b843c2a536a9d1d44b192d11670522c0
      size: 3562
    outs:
    - path: models/distilbert-imdb
      hash: md5
      md5: 7682bbb13892e1501c24577bd2476673.dir
      size: 268783444
      nfiles: 7
    - path: models/distilbert-imdb-checkpoint
      hash: md5
      md5: 156ddc7d46ec041a13efa55d7565d3a9.dir
      size: 804528074
      nfiles: 11
  evaluate:
    cmd: python3 -m src.modeling.evaluate
    deps:
    - path: data/processed/test.parquet
      hash: md5
      md5: fe80344fbb6c1cb5257c8e91da71f07c
      size: 2613371
    - path: models/distilbert-imdb
      hash: md5
      md5: 267dbc22d66ac42d6ba5fa687e8c4e43.dir
      size: 268783346
      nfiles: 7
    - path: src/modeling/evaluate.py
      hash: md5
      md5: 7e6451f0642f20a55ba46abf29973138
      size: 1121
  configure_gx:
    cmd: python3 -m src.data.gx_context_configuration
    deps:
    - path: src/data/gx_context_configuration.py
      hash: md5
      md5: 3a61ff2758fdfc14e6c6003f5162a6be
      size: 3718
  validate-data:
    cmd: python3 -m src.data.validate_data
    deps:
    - path: data/interim/imdb_cleaned.parquet
      hash: md5
      md5: 6060f09971d8f01b03e44bee7e9bc633
      size: 25776702
    - path: src/data/gx_context_configuration.py
      hash: md5
      md5: 3a61ff2758fdfc14e6c6003f5162a6be
      size: 3718
    - path: src/data/validate_data.py
      hash: md5
      md5: f211bd7615c06e3a36d2c139f0953a69
      size: 776
  train@0:
    cmd: python3 -m src.modeling.train distilbert/distilbert-base-uncased
      distilbert-imdb
    deps:
    - path: data/processed/train.parquet
      hash: md5
      md5: ff93f05c3f3589ceeb152d4ba12c0f8a
      size: 18040139
    - path: data/processed/validation.parquet
      hash: md5
      md5: 6e37345203b03e6a23ce22b35e4aa145
      size: 5167316
    - path: src/config.py
      hash: md5
      md5: 0a0e052e16cc7605444de9822fa4308e
      size: 1326
    - path: src/modeling/train.py
      hash: md5
      md5: 16b552adb51171bdaeee44d208c9d973
      size: 3401
    outs:
    - path: models/distilbert-imdb
      hash: md5
      md5: 26cab9cf260bb1aefc1767d7700813d6.dir
      size: 268783463
      nfiles: 7
    - path: models/distilbert-imdb-checkpoint
      hash: md5
      md5: 85147b5fa4cfa4d478b55b9cbe527140.dir
      size: 804528093
      nfiles: 11
  train@1:
    cmd: python3 -m src.modeling.train
      distilbert/distilbert-base-uncased-finetuned-sst-2-english
      distilbert-sst-imdb
    deps:
    - path: data/processed/train.parquet
      hash: md5
      md5: ff93f05c3f3589ceeb152d4ba12c0f8a
      size: 18040139
    - path: data/processed/validation.parquet
      hash: md5
      md5: 6e37345203b03e6a23ce22b35e4aa145
      size: 5167316
    - path: src/config.py
      hash: md5
      md5: 0a0e052e16cc7605444de9822fa4308e
      size: 1326
    - path: src/modeling/train.py
      hash: md5
      md5: 16b552adb51171bdaeee44d208c9d973
      size: 3401
    outs:
    - path: models/distilbert-sst-imdb
      hash: md5
      md5: 1fd8e58d4c45cbe7b12933686d980f4f.dir
      size: 268783567
      nfiles: 7
    - path: models/distilbert-sst-imdb-checkpoint
      hash: md5
      md5: c19bdf53886a0d0c0274eea81f4d989f.dir
      size: 804528197
      nfiles: 11
